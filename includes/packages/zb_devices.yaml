# /.homeassistant/includes/packages/system/zb_devices.yaml

zb_devices:


  automation:

# ##################################
# System - ZB Devices Status
# ##################################
  - alias: system_zb_devices_status
#  id: system_zb_devices_status
    initial_state: true
    mode: queued
    trigger:
      - platform: state
        entity_id:
          - sensor.sonoff_a4800110d3_temperature_sp
          - sensor.sonoff_a48001287c_temperature_kuh
          - sensor.agara_t_zal_temperature
          - binary_sensor.sonoff_ds01_contact
          - binary_sensor.agara_vibration_kor_action
          - sensor.agara_lumi_kor_luminance
          
          
        to: 'unavailable'
    condition:
      - condition: state
        entity_id: input_boolean.ha_shutdown
        state: 'off'

    action:
      - choose:
          - conditions: "{{ states('input_boolean.ha_shutdown') == 'off' }}"
            sequence:
              - service: notify.telegram_id_3
                data:
                  message: "\U0001f4a5 ZB: {{trigger.to_state.attributes.friendly_name}}: {{trigger.from_state.state}} -> {{trigger.to_state.state}}"


